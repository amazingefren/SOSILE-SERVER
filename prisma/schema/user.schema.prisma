// https://ftpdocs.broadcom.com/cadocs/0/e002961e.pdf
model User {
  id        Int     @id   @default(autoincrement())
  username  String  @unique
  email     String  @unique
  password  String
  
  role      Role    @default(USER)


  // Sessions / RT
  sessions  RToken[] @relation("UserTokens")

  // User Relations
  posts     Post[]
  profile   UserProfile?

  following User[] @relation(name: "followers")
  followers User[] @relation(name: "followers")

  likes     Post[]    @relation(name: "likedBy")
  
  replies      PostReply[] @relation("repliedBy")

  // Relation? WIP
  // replies   Post[]    @relation("repliedBy", fields: [replyId], references: [id])
  // replyId   Int
}

// model Follow {
//   id          Int   @id @default(autoincrement())
//   following        User? @relation(name:"following", fields:[followingId], references:[id])
//   followingId      Int?
//   follower    User? @relation(name:"follower", fields:[followerId], references:[id])
//   followerId  Int?
// }

model UserProfile {
  id          Int   @id @default(autoincrement())
  biography   String
  user        User  @relation(fields: [userId], references: [id])
  userId      Int
}

enum Role {
  USER
  ADMIN
}
